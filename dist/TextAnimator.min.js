"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var _params,n,totalChars,originalNodes;Number.prototype.map=function(e,t,n,a){return(this-e)*(a-n)/(t-e)+n};var DEFAULT_MIN_SCALE=.5,DEFAULT_MAX_SCALE=2,DEFAULT_MIN_OPACITY=.5,DEFAULT_MAX_OPACITY=1,TextAnimator=function(){function i(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,i),e instanceof HTMLElement){e.children.length<1&&(t=document.createElement("span"),e.parentNode.insertBefore(t,e),t.appendChild(e),e=t),n=e.childNodes}else{if(!(e instanceof NodeList))return void console.log("Error: Invalid TextAnimator target");n=e}_params=a,this.init()}return _createClass(i,[{key:"getScaleMin",value:function(){return _params.scaleMin||DEFAULT_MIN_SCALE}},{key:"getScaleMax",value:function(){return _params.scaleMax||DEFAULT_MAX_SCALE}},{key:"getOpacityMin",value:function(){return _params.opacityMin||DEFAULT_MIN_OPACITY}},{key:"getOpacityMax",value:function(){return _params.opacityMax||DEFAULT_MAX_OPACITY}},{key:"init",value:function(){var e,t,a;originalNodes=[];for(var i=totalChars=0;i<n.length;i++){originalNodes.push({element:n[i],content:n[i].textContent}),a="word"==_params.split?" ":"",e=n[i].textContent.split(a),t="";for(var r=0;r<e.length;r++)t+='<span style="display: inline-block">'+(" "===e[r]?"&ensp;":e[r])+"</span>";n[i].innerHTML=t,totalChars+=e.length}this.update=this.update.bind(this),window.requestAnimationFrame(this.update)}},{key:"update",value:function(e){for(var t,a,i,r,o=0,s=e/800,l=0;l<n.length;l++){t=n[l].childNodes;for(var c=0;c<t.length;c++)a=t[c],i=Math.cos((o+c)/(totalChars-1)*Math.PI*2-s).map(-1,1,this.getScaleMin(),this.getScaleMax()),a.style.transform="scale("+i+")",r=Math.cos((o+c)/(totalChars-1)*Math.PI*2-s).map(-1,1,this.getOpacityMin(),this.getOpacityMax()),a.style.opacity=r;o+=t.length}window.requestAnimationFrame(this.update)}},{key:"restoreHTML",value:function(){for(var e=0;e<originalNodes.length;e++)originalNodes[e].element.innerHTML=originalNodes[e].content;originalNodes=null}}]),i}();